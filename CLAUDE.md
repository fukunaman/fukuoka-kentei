# CLAUDE.md - AI開発アシスタント向けプロジェクトガイド

## プロジェクト概要

**福岡検定 Web アプリ**は、福岡検定の過去問題をブラウザ上で練習できるWebアプリケーションです。実際の試験形式に近い環境で、制限時間内に問題を解答し、即座に採点結果を確認できます。

### プロジェクトの目的

- 福岡検定の受験者が効率的に試験対策を行える環境を提供
- 実際の試験と同様の制限時間・問題形式で練習可能
- 過去問題のデジタルアーカイブとしての機能

## 技術スタック

### コア技術

- **React 19.1**: UIフレームワーク
- **TypeScript 5.9**: 型安全な開発
- **Vite 7.1**: 高速なビルドツール
- **ESLint 9.36**: コード品質管理

### パッケージマネージャー

- **pnpm**: 推奨パッケージマネージャー（効率的なディスク使用量）

## アーキテクチャ

### ディレクトリ構造

```
fukuoka-kentei/
├── src/
│   ├── components/          # Reactコンポーネント
│   │   ├── YearDifficultySelector.tsx  # 試験選択画面
│   │   ├── TestInterface.tsx           # 試験実施画面
│   │   ├── QuestionCard.tsx            # 個別問題表示
│   │   └── ResultScreen.tsx            # 結果表示画面
│   ├── data/
│   │   └── questions/       # 問題データ（JSON）
│   │       └── r6_shokyu.json
│   ├── types/
│   │   └── index.ts         # TypeScript型定義
│   ├── utils/
│   │   └── scoring.ts       # 採点ロジック
│   ├── App.tsx              # メインアプリケーション
│   ├── App.css              # アプリスタイル
│   ├── main.tsx             # エントリーポイント
│   └── index.css            # グローバルスタイル
├── public/                  # 静的アセット
└── 設定ファイル群
```

### コンポーネント設計

#### 1. YearDifficultySelector（試験選択）
- 年度と難易度（初級・上級）の選択
- 利用可能な試験データのリスト表示
- 試験開始トリガー

#### 2. TestInterface（試験実施）
- 制限時間のカウントダウン
- 問題の表示と回答管理
- 進捗状況の表示
- 試験終了処理

#### 3. QuestionCard（問題表示）
- 個別問題の表示
- 4択選択肢の管理
- 回答状態の保持

#### 4. ResultScreen（結果表示）
- 総合得点の表示
- 各問題の正誤と解説
- 再挑戦・メニュー遷移

### データ構造

#### 問題データフォーマット（JSON）

```json
{
  "year": "令和6年度",
  "difficulty": "初級",
  "timeLimit": 30,
  "questions": [
    {
      "id": 1,
      "question": "問題文",
      "options": ["選択肢1", "選択肢2", "選択肢3", "選択肢4"],
      "correctAnswer": 0,
      "explanation": "解説（オプション）"
    }
  ]
}
```

#### TypeScript型定義

主要な型定義は `src/types/index.ts` に集約されています：

- `Question`: 問題の構造
- `TestData`: 試験データ全体の構造
- `UserAnswer`: ユーザーの回答情報
- `TestResult`: 試験結果の構造

## 開発ガイドライン

### コーディング規約

1. **TypeScriptの型安全性**
   - すべての関数に適切な型定義を付与
   - `any`型の使用は最小限に
   - インターフェースの活用

2. **コンポーネント設計**
   - 単一責任の原則を守る
   - PropTypesは使用せず、TypeScriptの型定義を使用
   - Hooks（useState, useEffect等）を適切に使用

3. **スタイリング**
   - CSS Modulesではなく、通常のCSSファイル
   - BEMやセマンティックなクラス名の使用
   - レスポンシブデザインの考慮

4. **パフォーマンス**
   - 不要な再レンダリングを避ける
   - useMemoやuseCallbackを適切に使用
   - 大きなデータセットの効率的な処理

### 開発フロー

```bash
# 開発サーバー起動
pnpm dev

# リント実行
pnpm lint

# ビルド
pnpm build

# プレビュー
pnpm preview
```

### コミットメッセージ

- 簡潔で明確な日本語での記述
- プレフィックス使用を推奨：
  - `feat:` 新機能
  - `fix:` バグ修正
  - `docs:` ドキュメント
  - `style:` スタイル変更
  - `refactor:` リファクタリング
  - `test:` テスト追加・修正

## 新しい問題データの追加方法

### 手順

1. **JSONファイルの作成**
   - `src/data/questions/` に新しいJSONファイルを作成
   - 命名規則: `{年度}_{難易度}.json`（例: `r7_jokyu.json`）

2. **データの記述**
   - 上記のデータ構造に従って問題を記述
   - `correctAnswer`は0始まりのインデックス
   - `explanation`は任意項目だが、追加推奨

3. **アプリへの組み込み**
   - `src/App.tsx`の`getTestData`関数を更新
   - 新しい年度・難易度の分岐を追加
   - 動的インポートで問題データを読み込み

4. **動作確認**
   - 開発サーバーで選択肢に表示されることを確認
   - 試験実施と採点が正常に動作することを確認

### 問題データの品質チェックリスト

- [ ] すべての問題に4つの選択肢がある
- [ ] `correctAnswer`のインデックスが正しい（0-3）
- [ ] 問題文に誤字脱字がない
- [ ] 解説が適切に記述されている
- [ ] 制限時間が適切に設定されている

## テスト・デバッグ

### 動作確認項目

1. **試験選択画面**
   - すべての年度・難易度が表示される
   - 選択後に正しい試験データが読み込まれる

2. **試験実施画面**
   - タイマーが正常にカウントダウンする
   - 選択肢の選択・変更ができる
   - 時間切れで自動終了する

3. **結果画面**
   - 得点が正確に計算される
   - 正誤判定が正しい
   - 解説が表示される

### エラーハンドリング

- 問題データの読み込みエラーに対応
- タイマーの異常動作の防止
- ブラウザの互換性の確保

## AI開発アシスタント向け注意事項

### 変更時の注意点

1. **型定義の更新**
   - データ構造を変更する場合、必ず`src/types/index.ts`を更新
   - 既存のコンポーネントへの影響を確認

2. **後方互換性**
   - 既存の問題データが動作し続けるよう配慮
   - データフォーマット変更時は移行パスを提供

3. **レスポンシブデザイン**
   - モバイル・タブレット・デスクトップすべてで動作確認
   - CSSメディアクエリの適切な使用

4. **パフォーマンス最適化**
   - 大量の問題データでも快適に動作するよう配慮
   - 不要な状態更新を避ける

### 機能追加のアイデア

将来的に検討できる機能：

- [ ] ユーザー認証とデータ永続化
- [ ] 学習履歴の記録と分析
- [ ] 間違えた問題の復習モード
- [ ] ランダム出題モード
- [ ] 難易度別の統計情報
- [ ] ソーシャル共有機能
- [ ] ダークモード対応
- [ ] PWA化（オフライン対応）

## 関連リソース

- [React公式ドキュメント](https://react.dev/)
- [TypeScript公式ドキュメント](https://www.typescriptlang.org/)
- [Vite公式ドキュメント](https://vitejs.dev/)
- [福岡商工会議所 福岡検定](https://www.fukuoka-cci.or.jp/kentei/)

## ライセンス

MIT License

---

**最終更新**: 2025-11-04
**作成者**: AI Development Assistant
